{% extends "base.html" %}
{% block content %}
<h2>üìÑ Final Report:</h2>

<p><strong>Symptoms:</strong> {{ symptoms }}</p>
{% if age %}
<p><strong>Age:</strong> {{ age }} years old</p>
{% endif %}
{% if gender %}
<p><strong>Gender:</strong> {{ gender }}</p>
{% endif %}
{% if location %}
<p><strong>Location:</strong> {{ location }}</p>
{% endif %}
{% if duration %}
<p><strong>Duration of Symptoms:</strong> {{ duration }}</p>
{% endif %}
{% if medications %}
<p><strong>Medications Taken:</strong> {{ medications }}</p>
{% endif %}

{% if possible_cause and possible_cause != "No possible causes determined." %}
<p><strong>Possible Cause:</strong></p>
<ul>
    <li>{{ possible_cause }}</li>
</ul>
{% else %}
<p><strong>Possible Cause:</strong> No possible causes determined.</p>
{% endif %}

{% if probable_diseases %}
<h3>ü©∫ Probable Diseases:</h3>
<ul>
    {% for disease, prob in probable_diseases.items() %}
    <li><strong>{{ disease }}:</strong> {{ prob }}%</li>
    {% endfor %}
</ul>
{% else %}
<p>No probable diseases found based on the entered symptoms and information.</p>
{% endif %}

<h3>üìù Transcript of Questions and Answers:</h3>
{% set question_count = 1 %}
{% for entry in conversation_history %}
    {% if entry['followup_question_en'] and entry['response'] %}
        <p><strong>Question {{ question_count }} (English):</strong> {{ entry['followup_question_en'] }}</p>
        <p><strong>Your Answer:</strong> {{ entry['response'] }}</p>
        <hr>
        {% set question_count = question_count + 1 %}
    {% endif %}
{% endfor %}

{% endblock %}
