{% extends "base.html" %}
{% block content %}
<h2>üìÑ Final Report / ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü:</h2>

<!-- Symptoms -->
<p><strong>Symptoms / ‡§≤‡§ï‡•ç‡§∑‡§£:</strong> {{ symptoms }}</p>
{% if age %}
<p><strong>Age / ‡§Ü‡§Ø‡•Å:</strong> {{ age }} years old / {{ age }} ‡§µ‡§∞‡•ç‡§∑</p>
{% endif %}
{% if gender %}
<p><strong>Gender / ‡§≤‡§ø‡§Ç‡§ó:</strong> {{ gender }}</p>
{% endif %}
{% if location %}
<p><strong>Location / ‡§∏‡•ç‡§•‡§æ‡§®:</strong> {{ location }}</p>
{% endif %}
{% if duration %}
<p><strong>Duration of Symptoms / ‡§≤‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§ï‡•Ä ‡§Ö‡§µ‡§ß‡§ø:</strong> {{ duration }}</p>
{% endif %}
{% if medications %}
<p><strong>Medications Taken / ‡§≤‡•Ä ‡§ó‡§à ‡§¶‡§µ‡§æ‡§è‡§Ç:</strong> {{ medications }}</p>
{% endif %}

<!-- Possible Cause -->
{% if possible_cause_en and possible_cause_en != "No possible causes determined." %}
<p><strong>Possible Cause / ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§æ‡§∞‡§£ (English):</strong></p>
<ul>
    <li>{{ possible_cause_en }}</li>
</ul>
<p><strong>‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§æ‡§∞‡§£ (Hindi):</strong></p>
<ul>
    <li>{{ possible_cause_hi }}</li>
</ul>

{% else %}
<p><strong>Possible Cause / ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§æ‡§∞‡§£:</strong> No possible causes determined. / ‡§ï‡•ã‡§à ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§æ‡§∞‡§£ ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§</p>
{% endif %}

<!-- Probable Diseases -->
{% if probable_diseases %}
<h3>ü©∫ Probable Diseases / ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§∞‡•ã‡§ó:</h3>
<ul>
    {% for disease, prob in probable_diseases.items() %}
    <li><strong>{{ disease }}:</strong> {{ prob }}%</li>
    {% endfor %}
</ul>
{% else %}
<p>No probable diseases found based on the entered symptoms and information. / ‡§Ü‡§™‡§ï‡•á ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§ø‡§è ‡§ó‡§è ‡§≤‡§ï‡•ç‡§∑‡§£‡•ã‡§Ç ‡§î‡§∞ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§ï‡•ã‡§à ‡§∏‡§Ç‡§≠‡§æ‡§µ‡§ø‡§§ ‡§∞‡•ã‡§ó ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§</p>
{% endif %}

<!-- Transcript of Questions and Answers -->
<h3>üìù Transcript of Questions and Answers / ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§î‡§∞ ‡§â‡§§‡•ç‡§§‡§∞‡•ã‡§Ç ‡§ï‡§æ ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü:</h3>
<ul>
    <!-- Initial Symptom Input -->
    {% for entry in conversation_history %}
        {% if entry['user_input_english'] %}
            <li><strong>Initial Symptom Input / ‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠‡§ø‡§ï ‡§≤‡§ï‡•ç‡§∑‡§£ ‡§á‡§®‡§™‡•Å‡§ü:</strong> {{ entry['user_input_english'] }}</li>
        {% endif %}
    {% endfor %}
    <hr>
    <!-- Follow-Up Q&A -->
    {% set question_count = 1 %}
    {% for entry in conversation_history %}
        {% if entry['followup_question_english'] and entry['response_english'] %}
            <li>
                <p><strong>Question {{ question_count }} (English) / ‡§™‡•ç‡§∞‡§∂‡•ç‡§® {{ question_count }} (‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä):</strong> {{ entry['followup_question_english'] }}</p>
                <p><strong>Your Answer / ‡§Ü‡§™‡§ï‡§æ ‡§â‡§§‡•ç‡§§‡§∞:</strong> {{ entry['response_english'] }}</p>
            </li>
            <hr>
            {% set question_count = question_count + 1 %}
        {% endif %}
    {% endfor %}
</ul>

<!-- JavaScript for Audio Playback -->
{% if possible_cause_audio_url_hi or possible_cause_audio_url_en %}
<script>
function playAudio(audioId) {
    var audio = document.getElementById(audioId);
    audio.play();
}
</script>
{% endif %}

{% endblock %}
